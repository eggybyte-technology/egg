version: '3.8'

services:
  order-service:
    build:
      context: ../backend/order-service
      dockerfile: ../build/Dockerfile.backend
    ports:
      - "8080:8080"
      - "8081:8081"
      - "9091:9091"
    environment:
      - LOG_LEVEL=info
      - KUBERNETES_NAMESPACE=prod
      - DATABASE_DSN=user:pass@tcp(mysql:3306)/app?charset=utf8mb4&parseTime=True
      - HTTP_PORT=8080
      - HEALTH_PORT=8081
      - METRICS_PORT=9091
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8081/health"]
      interval: 30s
      timeout: 10s
      retries: 3

networks:
  default:
    name: example-platform-network
