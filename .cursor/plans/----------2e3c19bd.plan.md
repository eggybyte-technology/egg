<!-- 2e3c19bd-f511-45c1-8d88-8846d597c7db ad8ed2f7-a021-4933-9741-f45b24f546e4 -->
# Update All Module READMEs

## Overview

Update all module READMEs across the egg framework to reflect recent architectural improvements, new features, and API changes. Focus on modules that were modified and ensure consistency across all documentation.

## Key Changes to Document

### Recent Framework Improvements

1. **LOG_LEVEL environment variable** - Replaces `WithDebugLogs()` for log level control
2. **WithAppConfig()** - Simplified database configuration auto-detection from BaseConfig
3. **New log helpers** - Added `Int32()`, `Int64()`, `Float64()`, `String()` to core/log
4. **Database auto-detection** - servicex now extracts DB config from BaseConfig after env binding
5. **Docker compose improvements** - Infrastructure services persist across test runs

## Files to Update

### 1. Root README.md

**Changes:**

- Update Quick Start to use `LOG_LEVEL` environment variable
- Show `WithAppConfig()` instead of separate `WithConfig()` + `WithDatabase()`
- Update code examples to reflect modern patterns
- Add "Recent Improvements" section highlighting new features
- Update "Configuration" section to document LOG_LEVEL

**Example snippet:**

```go
// Modern approach with auto-detection
err := servicex.Run(ctx,
    servicex.WithService("my-service", "1.0.0"),
    servicex.WithLogger(logger),
    servicex.WithAppConfig(cfg), // Auto-detects database from BaseConfig
    servicex.WithAutoMigrate(&model.User{}),
    servicex.WithRegister(registerServices),
)
```

### 2. servicex/README.md

**Changes:**

- Update "Basic Usage" to show `WithAppConfig()` pattern
- Document LOG_LEVEL environment variable in Configuration Options table
- Mark `WithDebugLogs()` as deprecated with migration guidance
- Add section on database auto-detection from BaseConfig
- Update all code examples to use `WithAppConfig()`
- Add troubleshooting section for database configuration

**New sections:**

- "Database Configuration Auto-Detection" - How servicex extracts DB config after env binding
- "Log Level Control" - Using LOG_LEVEL vs deprecated WithDebugLogs
- "Migration Guide" - Updating from old patterns to new patterns

### 3. core/log/README.md

**Changes:**

- Add documentation for new helper functions: `Int32()`, `Int64()`, `Float64()`, `String()`
- Update "Key-Value Helpers" section with complete function list
- Add usage examples for new helpers
- Update code snippets throughout to use new helpers where appropriate

**Example addition:**

```go
// New helper functions
func Int32(key string, value int32) any
func Int64(key string, value int64) any
func Float64(key string, value float64) any
func String(key, value string) any  // Alias for Str()
```

### 4. examples/minimal-connect-service/README.md

**Changes:**

- Update "Running the Service" to show LOG_LEVEL usage
- Update environment variables section
- Add section on log level configuration
- Update code examples to reflect current main.go implementation
- Add troubleshooting for log levels

**Environment variables table update:**

```
LOG_LEVEL=debug  # Set log level: debug, info, warn, error
```

### 5. examples/user-service/README.md

**Changes:**

- Update "Configuration" section to document database auto-detection
- Show `WithAppConfig()` usage in code examples
- Document LOG_LEVEL environment variable
- Update "Database Setup" to explain auto-detection from BaseConfig
- Add migration guide from old `WithDatabase(servicex.FromBaseConfig())` pattern
- Update environment variables table

**Key update:**

```go
// Old pattern (deprecated)
servicex.WithConfig(cfg),
servicex.WithDatabase(servicex.FromBaseConfig(&cfg.Database)),

// New pattern (recommended)
servicex.WithAppConfig(cfg), // Auto-detects database from BaseConfig
```

### 6. examples/connect-tester/README.md

**Changes:**

- Update "Overview" to mention enhanced test coverage
- Document new test scenarios (multi-language greetings, batch operations, error scenarios)
- Update "Usage" examples to show all test types
- Add section on test output interpretation
- Update "Dependencies" section

### 7. configx/README.md

**Changes:**

- Emphasize BaseConfig usage with servicex
- Add section on database configuration integration
- Show how BaseConfig.Database is used by servicex
- Update examples to show complete BaseConfig usage
- Add best practices for embedding BaseConfig

**New section:**

```markdown
## Integration with servicex

When using BaseConfig with servicex, database configuration is automatically detected:

\`\`\`go
type AppConfig struct {
    configx.BaseConfig  // Includes Database, HTTP/Health/Metrics ports
    CustomField string `env:"CUSTOM_FIELD"`
}

// servicex automatically extracts Database config from BaseConfig
servicex.WithAppConfig(cfg)
\`\`\`
```

### 8. logx/README.md

**Changes:**

- Add section on LOG_LEVEL environment variable usage
- Document integration with servicex log level control
- Update examples to show environment-based configuration
- Add best practices for log level management in production

**New section:**

```markdown
## Log Level Configuration

Control log levels via environment variable:

\`\`\`bash
LOG_LEVEL=debug  # debug, info, warn, error
\`\`\`

When using servicex, log level is automatically configured from LOG_LEVEL.
```

### 9. Additional Module READMEs

Update the following modules with minor corrections and consistency improvements:

- **connectx/README.md** - Ensure examples use current patterns
- **clientx/README.md** - Update integration examples
- **obsx/README.md** - Update servicex integration examples
- **storex/README.md** - Document servicex auto-migration integration
- **runtimex/README.md** - Update health check examples

## Documentation Standards

All updates must follow:

1. **English only** - All documentation in English
2. **Code examples** - Compilable, current, and tested
3. **Consistency** - Use same terminology and patterns across all READMEs
4. **Completeness** - Include installation, usage, configuration, examples
5. **Best practices** - Show recommended patterns, mark deprecated approaches

## Validation

After updates:

1. Verify all code examples compile
2. Check cross-references between modules
3. Ensure consistent terminology
4. Validate markdown formatting
5. Review for completeness and clarity

### To-dos

- [ ] 更新 connect-tester 的 README.md，说明新的使用方式和测试场景